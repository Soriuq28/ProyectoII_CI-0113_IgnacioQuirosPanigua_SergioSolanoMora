<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SVG Tree Viewer</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
      .container { padding: 16px; }
      svg { border: 1px solid #ddd; display: block; margin: 0 auto; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Árbol (visualización SVG)</h1>

      <div style="margin-bottom:8px; display:flex; gap:8px; align-items:center;">
        <button id="zoomOutBtn" aria-label="Zoom out">−</button>
        <button id="zoomInBtn" aria-label="Zoom in">+</button>
        <button id="resetZoomBtn" aria-label="Reset zoom">Reset</button>
        <span id="scaleLabel" style="margin-left:8px; font-size:14px; color:#333">100%</span>
      </div>

      <!-- El contenido SVG será reemplazado aquí -->
      <div id="svgWrapper">
        %s
      </div>
    </div>

    <script>
      (function(){
        const ZOOM_STEP = 1.15; // factor
        const MIN_SCALE = 0.2;
        const MAX_SCALE = 6.0;
        let scale = 1.0;

        const svgWrapper = document.getElementById('svgWrapper');
        const svg = svgWrapper ? svgWrapper.querySelector('svg') : null;
        const zoomInBtn = document.getElementById('zoomInBtn');
        const zoomOutBtn = document.getElementById('zoomOutBtn');
        const resetBtn = document.getElementById('resetZoomBtn');
        const scaleLabel = document.getElementById('scaleLabel');

        function applyScale(){
          if(!svg) return;
          svg.style.transformOrigin = '50% 0%';
          svg.style.transform = 'scale(' + scale + ')';
          scaleLabel.textContent = Math.round(scale * 100) + '%';
        }

        function zoomIn(){ scale = Math.min(MAX_SCALE, scale * ZOOM_STEP); applyScale(); }
        function zoomOut(){ scale = Math.max(MIN_SCALE, scale / ZOOM_STEP); applyScale(); }
        function resetZoom(){ scale = 1.0; applyScale(); }

        if(zoomInBtn) zoomInBtn.addEventListener('click', zoomIn);
        if(zoomOutBtn) zoomOutBtn.addEventListener('click', zoomOut);
        if(resetBtn) resetBtn.addEventListener('click', resetZoom);

        // support wheel + ctrl for zoom
        if(svg){
          svg.addEventListener('wheel', function(e){
            if(!e.ctrlKey) return; // require ctrl + wheel
            e.preventDefault();
            if(e.deltaY < 0) zoomIn(); else zoomOut();
          }, {passive:false});
        }

        // init
        applyScale();
      })();
    </script>
  </body>
</html>
